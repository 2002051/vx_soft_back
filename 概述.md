# 概述-ytw

## 建立连接
路由如下
- ws://127.0.0.1:8000/chat/1/2/


我来解释一下： 

- ws 表示使用的通信协议无需关心类似于http
- 127.0.0.1:8000 表示服务器域名 
- 1：表示购买者id
- 2： 表示卖家id

那么你需要做的第一步建立连接，就应该是这个思路： 
	- 客户在商品详情页点击客服 根据购买关系建立连接
	- 客服点击消息列表，同样根据购买关系建立连接

## 发送数据包
发送消息的数据包如果是msg  那么msg应该用如下格式处理
**var msg = JSON.stringify({"sender":1,"data":"123123"})**
 - sender 表示发送者的id ，不考虑卖卖关系
 - data 就是用户输入的消息内容


## 新增消息记录

消息的回调函数中可以往当前展示的消息记录列表尾部插一条数据
而无论是卖家还是买家，如果同时都在连接中，那么有人发送消息，这个回调都会被调动。